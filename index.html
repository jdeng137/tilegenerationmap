<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Seattle Fire Stations Map</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.18.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.18.1/mapbox-gl.js"></script>
<style>
body { 
    margin: 0; 
    padding: 0; 
    font-family: Arial, sans-serif;
}
#map { 
    position: absolute; 
    top: 0; 
    bottom: 0; 
    width: 100%; 
}

/* Title and Description */
.map-overlay {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    max-width: 300px;
    z-index: 1;
}

.map-overlay h2 {
    margin: 0 0 10px 0;
    font-size: 18px;
    color: #333;
}

.map-overlay p {
    margin: 0;
    font-size: 12px;
    color: #666;
    line-height: 1.5;
}

/* Layer Switcher */
.layer-switcher {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    z-index: 1;
}

.layer-switcher h3 {
    margin: 0 0 10px 0;
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.layer-switcher label {
    display: block;
    margin: 8px 0;
    font-size: 13px;
    color: #333;
    cursor: pointer;
}

.layer-switcher input[type="checkbox"] {
    margin-right: 8px;
    cursor: pointer;
}

/* Scale Bar */
.mapboxgl-ctrl-scale {
    background-color: rgba(255, 255, 255, 0.8);
    border: 2px solid #333;
    border-top: none;
    padding: 0 5px;
    color: #333;
    font-size: 11px;
}
</style>
</head>
<body>
<div id="map"></div>

<!-- Title and Description -->
<div class="map-overlay">
    <h2>Seattle Fire Stations Map</h2>
    <p>This interactive map displays fire stations across Seattle with multiple visualization layers. Use the layer switcher to toggle between different map styles and data layers.</p>
</div>

<!-- Layer Switcher -->
<div class="layer-switcher">
    <h3>Map Layers</h3>
    <label>
        <input type="checkbox" id="toggle-basemap">
        Custom Basemap
    </label>
    <label>
        <input type="checkbox" id="toggle-thematic">
        Fire Stations Only
    </label>
    <label>
        <input type="checkbox" id="toggle-combined">
        Combined Layer
    </label>
    <label>
        <input type="checkbox" id="toggle-themed" checked>
        Themed Map
    </label>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiamRlbmcxMzciLCJhIjoiY21oY3BwdGxtMW93bDJsb282bnl6bWl0NSJ9.t19u2LlOUGTPHQ7N82CpkA';

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [-122.31987312542114, 47.59378735528869],
    zoom: 12
});

// Add zoom and navigation controls
map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');

// Add scale bar
map.addControl(new mapboxgl.ScaleControl({
    maxWidth: 200,
    unit: 'imperial'
}), 'bottom-left');

map.on('load', () => {
    // Tileset 1 - Custom basemap
    map.addSource('basemap-tiles', {
        type: 'raster',
        tiles: ['assets/tileset_1/{z}/{x}/{y}.png'],
        tileSize: 256,
        attribution: 'Map tiles designed by Jiali Deng'
    });
    
    map.addLayer({
        id: 'basemap',
        type: 'raster',
        source: 'basemap-tiles',
        layout: {
            'visibility': 'none'
        }
    });
    
    // Tileset 2 - Thematic layer (fire stations only)
    map.addSource('thematic-tiles', {
        type: 'raster',
        tiles: ['assets/tileset_2/{z}/{x}/{y}.png'],
        tileSize: 256,
        attribution: 'Fire station data'
    });
    
    map.addLayer({
        id: 'thematic',
        type: 'raster',
        source: 'thematic-tiles',
        layout: {
            'visibility': 'none'
        }
    });
    
    // Tileset 3 - Combined basemap + fire stations
    map.addSource('combined-tiles', {
        type: 'raster',
        tiles: ['assets/tileset_3/{z}/{x}/{y}.png'],
        tileSize: 256,
        attribution: 'Combined basemap and fire stations'
    });
    
    map.addLayer({
        id: 'combined',
        type: 'raster',
        source: 'combined-tiles',
        layout: {
            'visibility': 'none'
        }
    });
    
    // Tileset 4 - Themed Mapbox layer
    map.addSource('themed-tiles', {
        type: 'raster',
        tiles: ['assets/tileset_4/{z}/{x}/{y}.png'],
        tileSize: 256,
        attribution: 'Themed map tiles'
    });
    
    map.addLayer({
        id: 'themed',
        type: 'raster',
        source: 'themed-tiles'
    });
    
    // Layer Switcher Functionality
    document.getElementById('toggle-basemap').addEventListener('change', function(e) {
        map.setLayoutProperty('basemap', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    
    document.getElementById('toggle-thematic').addEventListener('change', function(e) {
        map.setLayoutProperty('thematic', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    
    document.getElementById('toggle-combined').addEventListener('change', function(e) {
        map.setLayoutProperty('combined', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    
    document.getElementById('toggle-themed').addEventListener('change', function(e) {
        map.setLayoutProperty('themed', 'visibility', e.target.checked ? 'visible' : 'none');
    });
});
</script>
</body>
</html>